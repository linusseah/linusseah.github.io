---
layout: post
title: "Inside Out: Machine Learning & Lexical Rule Based Emotion Classifier for Textual Input"
date: 2020-01-20
excerpt: "Capstone project for General Assembly - Data Science Immersive 11 (Oct 29 2019 - Jan 31 2020). Machine Learning & Lexical Rule Based Emotion Classifier for Text"
project: true
tags: [nlp, recommender system, web scraping, logistic regresion, decision trees, flask]
comments: true
---
## Background  
> "What is on your mind?... What are you thinking about?... A penny for your thoughts?" For most of us, experiencing, intepreting, understanding and reacting to our own emotional states and those around us are very much a part of our daily interactions at the workplace, at home with our family members and other social settings; reacting appropriately to different situations based on the emotional context is key to developing meaningful personal / business relationships. I suspect this is why friends often prefer meeting up in person / business executives insist on having face to face negotiations etc. However, appreciation of emotional context is often done in-person - and for good reason - we read emotions best based on tonality, body-language, facial expressions and many other verbal and non-verbal cues perceived both consciously and sub-consciously. For this reason, emotional interpretation is largely limited to a localised / small settings.  

> But what if we could glean information on emotional responses 'en-masse' using other less conventional methods? For example, by analyzing the 'tonality' based on a particular style of writing or 'expressions' based on punctuations or other key words used from textual input? What if we could tell how a hundred, or a thousand people are feeling at a particular point in time and specifically about what -- in real time no less. These questions motivated my research into the field of Natural Language Processing (NLP) and the development of a tool that is built on both traditional Machine Learning/NLP concepts but also lexical rule-based libraries that other researchers have built to efficiently provide 'emotional data' en-masse starting with text as input.  

## Problem Statement 
It is difficult to gather emotional feedback at scale. A potential way to do so is to mine and interpret readily available but hard to interpret unstructured forms of input (like text on social media). 

The following are some examples of potential painpoints/use cases for 'emotional-listening': 

1. Costly and time-consuming to gather mass implicit feedback: 
Information on the emotional response to an event (could be a press release, a public speech etc) could be helpful for better decision making (e.g. reactions toward a certain action or policy) but obtaining this implicit feedback in real-time and on a mass level is often costly and time-consuming, if even possible. While explicit emotional feedback could be obtained from social media platforms like facebook (e.g by calculating the % of likes, or angry emojis reacts etc) this would only provide a snapshot in reaction to something (i.e. a secondary reaction). It would be more powerful if we could get that same analysis implicitly based on individual's textual input (a primary reaction) on publicly accessible platforms. 

2. Preventive action: 
Unfortunate events like mass-killings are often preceded by telling messages indicative of troubled emotions before the incidents happen but are usually only discovered only post-mortem.    

3. Augmented sentiment analysis: 
Current sentiment analysis is usually binary. However, even within the broad categories of ‘good’ or ‘bad’ it would be helpful to understand what kind of ‘good’ or ‘bad’ -- and at what intensities -- in order to respond more appropriately to the reaction. 

## Proposed Solution 
Developing a web-application that takes in textual input and provides real-time predicion of emotions   

## Methods Applied 
    
1. Natural Language Processing: pre-process text (through vectorizing, lemmatizing etc), and to break it down in a way that best captures the context and sentiment of the textual input. 

2. Classification modelling: train the model against the tagged emotional state to accurately classify emotions according to textual input 

3. Lexical Rule-based libraries: lexical libraries that have been manually curated to pre-assign sentiment scores to specific key-words, word orderings etc according to a rule-based approach.  

## Data 
1. Pre-tagged Kaggle dataset for emotions based on 450,000 tweets  
2. Pre-tagged Figure-eight dataset (~50,000) text inputs 

## Other Use-cases 
    
1. Emotional analysis as an additional data point for even more targeted digital marketing 

2. Better recommendation systems (think Spotify songs that are mood appropriate) 

3. Used to pre-empt bad events from happening  

4. Used for more granular sentiment analysis (for policy makers, anything thats find an emotional response informative)

5. Mental health tracker: ppl can journal and put their journal through this analyser, which will help to track their emotions at chosen time intervals over time 

6. To help with disabilities: if a speech to text function can pass info through this model to return feedback on emotions, it can help those with an impaired ability to pick up emotional nuances through daily text/speech based interactions.

8. In general, as an additional data point — layered on top of other structured and unstructured data inputs (ppl posting live videos on facebook, insta-stories etc) 
























## Difficulties
    
1. Text as a pure emotion analyser would be difficult as there is so much that is lost when we exclude the verbal intonations, facial expressions etc so can think about how you can compensate for those things in your analysis (e.g. picking up bold, or italics, exclamations, or emojis etc) could also consider how I can maybe augment the dataset with other features to better predict for emotion? 


2. a single textual input could referce multiple emotional states at varying points in time e.g. someone recouting his or her emotions throughout the day. How to reconcile this? the overall emotional state on balance? 


3. things like sarcasm, or passive-aggressiveness would be hard to detect and even so, to classify as a particular emotion


4. pejoratives (words expressed as neutral or even positive statements to mask a negative sentiment) e.g. 'the chicken had a unique taste... or his idea was interesting..." 


5. picking up emotional-nuances expressed in non-textual cues like emoticons or accents like bold, italics etc e.g. ... or :>, **angry** etc 


6. slang is localised. so the model would probably not perform well in different cultural contexts unless it is trained on multiple localised datasets (e.g. American slang used to connote certain emotions are not the same as those that Singaporeans would use) slang is also dynamic in nature (this is why things like urban dictionary exist because new words are always getting added to it) this also means that the model will have to be continuously trained on new datasets/ add new words to an emotion library 


7. lexical methods are context specific; vocab that connotes specific emotion differ from setting to setting. (e.g. lexical anaylsis for social media would be alot more slang/emoticon heavy whereas the same for formal writing would not) So a model trained on a social media based dataset would probably not do as well when interpreting the emotions of formal prose. 


8. humans experience complex emotions (it's hard enough for a human to accurately interpret emotion, not to mention computers...) so it would be important to objectively quantify that complex expression in some way. Also to figure out which emotions are compatible with each other and which aren't. (e.g. you can be both happy and excited at the same time... but happy and angry? ... possible?) "locating your current emotional state in a N-dimensional emotional plane - plotted over time would form your emotional cloud "
note to self: i think this can be captured in the theory of valence - which classifies emotions into generally positive or negative sentiments
https://en.wikipedia.org/wiki/Valence_(psychology)


9. dealing with imbalanced classes of emotions (general emotions like joy or sadness would be classified far more often than more nuanced ones like emptiness..) more broadly speaking, the process of classifying emotions is tricky because sometimes we don't even know how to particularize our emotions in words.  


10. dataset is currently being trained largely on individual sentences. Not sure how well the model would perform on larger chunks of texs e.g. paragraphs - **find some way to split the analysis up to the sentence? e.g. within paragraphs**  


11. will cleaning technique differ depending on subsequent method of analysis adopted? (e.g. if VADER uses emoticons and Caps to detect valence then we probably shouldnt strip the text of non-textual input and lowercase everything)


## Post Project Considerations  

- how to best score emotions? What kind of scale? Maybe some kind of happiness index ?  (Need to find some kind of objective and standardised way to score text input and map that against an emotional scale) 

- how many emotions do I want to classify? 

- how would I delineate one emotion from another? (Should they exist along some kind of spectrum?) 

- how do I deal with complex emotion? (Ppl can experience multiple emotions at once) -> would be nice to map it onto a spider graph and show how much of each emotion is being expressed through that textual input 

- would it make sense to couple this study with prediction of personality (could be the case that given someone’s personality, the same textual input could be interpreted differently ) 

- what other features are relevant for this study? (e.g. keep layering study with other data inputs like bio-chemical info, maybe current activity or diet?) 







